# 命令系统

## 一、Linux帮助系统

在man手册中常见的几个数字的含义：

| 代号 | 代号的含义                                    |
| ---- | --------------------------------------------- |
| 1    | 用户在shell环境下可以操作的命令或者可执行文件 |
| 2    | 系统内核可调用的函数和工具                    |
| 3    | 一些常用的函数与函数库，u大部分C的函数        |
| 4    | i设备文件的h说明，通常i是在`\dev`下的设备     |
| 5    | 配置文件或者某些文件的格式                    |
| 6    | 游戏                                          |
| 7    | 惯例与协议等，例如文件系统、网络协议等        |
| 8    | 系统管理员可用的命令                          |
| 9    | 跟kernel有关的文件                            |
| o    | 旧文档                                        |
| n    | 新文档                                        |
| l    | 本地文档                                      |

> ```shell
> man -f name # 查找名字是name的命令、函数等
> # man -f 是精确查找
> man -k name # 查找名字与描述中包含name的命令、函数等
> # man -k 是模糊查找
> ```



## 二、bash

### 1.通配符

| 通配符                    | 含义                                           |
| ------------------------- | ---------------------------------------------- |
| ？                        | 代表单个任意字符                               |
| *                         | 代表任意几个字符                               |
| [list]                    | 匹配o方括号内的任意单一字符                    |
| [!list]                   | 匹配除了方括号内的任意单一字符                 |
| [`c1`-`c2`]               | 匹配`c1`-`c2`中任意单一字符                    |
| {`string1`,`string2`... } | 匹配`string1`或者`string2`(或者更多)其一字符串 |



## 三、任务管理

1. `&`：在命令的后面加上`&`表示后台执行的意思

   ```shell
   command &
   ```

2. `;`:在命令之间以`;`相连，表示顺序执行的意思

   ```shell
   command1;command2
   ```

3. `&&`:命令之间以`&&`相连时，只有第一个命令成功执行，第二个命令才会执行

   ```shell
   command1 && command2
   ```

4. `||`:命令之间以`||`相连时，如果前一个命令失败则执行第二个命令

   ```shell
   command1 || command2
   ```

5. ``:命令中如果包含另一个命令，则用符号

   ``j将它包括i起来，在执行的时候系统将优先执行

   ``中的子命令，然后将其结果代入父命令继续执行

   ```shell
   command1 `command2`
   ```

6. `ctrl+z`:在shell中执行命令时，同时按下`ctrl+z`可以将进程暂时挂起。

7. `bg`：执行`bg`命令，可以将挂起的命令后台运行。

8. `fg`:执行`fg`命令，可以将后台执行或者挂起的命令转为前台执行

9. `jobs`:执行`jobs`命令可以查看所有在后台执行和挂起的任务以及任务编号



## 四、管道、重定向

1. `>`:重定向符，对于内容是覆盖的

2. `>>`:作用基本与`>`相同，不同的是`>>`是将内容追加到文件的末尾，而`>`是覆盖原文件。

3. `<`：与`>`刚好相反，是从文件到命令的重定向，它将文件的内容输出到命令作为输入

4. `<<`: 用来将一段内容追加到文件末尾

   ```shell
   cat >> file << EOF
   # 这里的 >> 是追加，而 << 的作用就是获得一段文本作为添加的内容
   ```

> cat 命令实际上是在进行标准输入的等待，一旦等到标准输入，就进行标准输出。



## 五、转义符

| 转义字符 | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| "        | 硬转义，硬引用，其内部所有的shell元字符、通配符都会被关掉。但是，注意，硬转义中不允许出现单引号。 |
| ""       | 软转义，软引用，其u内部只允许出现特定的shell元字符($,',\\):\$用于变量值替换，'用于命令替换，\\用于转义单个字符 |
| \\       | 反斜杠，转义，去除其后紧跟的元字符或通配符的特殊意义。       |

> ```shell
> PATH = "$PATH"
> # 由于""是软转义，可以使用$, ', \这种符号进行操作
> # 但是如果一旦变成单引号，那么就是硬转义，所有通配符都会被关闭掉
> ```
>
> 

## 六、Shell 元字符

| 字符 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| $    | 变量i值i替换，$变量名替换为shell变量的值，其中`\$()`同``，\${}限定变量名的范围，\$[]整数计算。 |
| \|   | 管道命令，例如：`p1 | p2`是将`p1`的标准输出作为`p2`的标准输入 |
| ！   | `!history_number`可以重新执行第`history_number`的命令;但是同时它也可以进行前缀匹配`！command`;同时也具有取反作用。 |

> `$？`是用来获取上一个系统调用的返回值的，如果是0,则表示正常退出，否则返回的是错误代码

> 不要在C程序中使用～来代替家目录

> ```shell
> source shellfile
> #将sh脚本在当前进程中生效
> #事实上 .shellfile能够获得与source shellfile相同的结果
> ```

